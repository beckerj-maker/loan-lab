<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loan Lab – Station A (Interest Accrual)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo } = React;

    function NumberInput({ label, value, setValue, min = 0, step = 1, suffix = "" }) {
      return (
        <label className="block">
          <span className="text-sm text-gray-600">{label}</span>
          <div className="mt-1 flex items-center gap-2">
            <input
              type="number"
              value={value}
              min={min}
              step={step}
              onChange={(e) => setValue(Number(e.target.value))}
              className="w-full md:w-56 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black/30"
            />
            {suffix && <span className="text-gray-500 text-sm">{suffix}</span>}
          </div>
        </label>
      );
    }

    function Select({ label, value, setValue, options }) {
      return (
        <label className="block">
          <span className="text-sm text-gray-600">{label}</span>
          <select
            value={value}
            onChange={(e) => setValue(e.target.value)}
            className="mt-1 w-full md:w-56 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-black/30"
          >
            {options.map((o) => (
              <option key={o.value} value={o.value}>{o.label}</option>
            ))}
          </select>
        </label>
      );
    }

    function Card({ title, children, footer }) {
      return (
        <div className="bg-white border rounded-2xl shadow-sm p-5">
          {title && <h3 className="text-lg font-semibold mb-3">{title}</h3>}
          <div>{children}</div>
          {footer && <div className="mt-4 pt-3 border-t text-sm text-gray-600">{footer}</div>}
        </div>
      );
    }

    function formatUSD(x) {
      try { return x.toLocaleString(undefined, { style: "currency", currency: "USD" }); } catch { return "$" + x.toFixed(2); }
    }

    function StationA() {
      const [principal, setPrincipal] = useState(5000);
      const [ratePct, setRatePct] = useState(6);
      const [years, setYears] = useState(3);
      const [compFreq, setCompFreq] = useState("annual");
      const [monthlyPay, setMonthlyPay] = useState(100);

      const r = ratePct / 100;
      const n = compFreq === "annual" ? 1 : compFreq === "monthly" ? 12 : 365;

      const simpleInterest = useMemo(() => principal * r * years, [principal, r, years]);
      const simpleTotal = principal + simpleInterest;

      const compoundTotal = useMemo(() => principal * Math.pow(1 + r / n, n * years), [principal, r, n, years]);
      const compoundInterest = compoundTotal - principal;

      const months = Math.max(1, Math.round(years * 12));
      const monthlyRateSimple = r / 12;
      const monthlyRateCompound = r / 12;

      function simulateBalance(initial, monthlyRate, monthlyPayment, totalMonths, compounding) {
        let bal = initial;
        for (let m = 1; m <= totalMonths; m++) {
          bal = bal * (1 + monthlyRate);
          bal = Math.max(0, bal - monthlyPayment);
          if (compounding === "simple") {
            const base = initial * monthlyRate;
            bal = Math.max(0, bal + base);
          }
        }
        return bal;
      }

      const simSimpleBalance = useMemo(() => simulateBalance(principal, monthlyRateSimple, monthlyPay, months, "simple"), [principal, monthlyRateSimple, monthlyPay, months]);
      const simCompoundBalance = useMemo(() => simulateBalance(principal, monthlyRateCompound, monthlyPay, months, "compound"), [principal, monthlyRateCompound, monthlyPay, months]);

      return (
        <div className="min-h-screen bg-gray-50 max-w-6xl mx-auto px-4 py-8 space-y-6">
          <h2 className="text-2xl md:text-3xl font-bold">Station A: Interest Accrual Challenge</h2>
          <p className="text-gray-600 max-w-3xl">
            Interest is the price you pay to borrow money. With <strong>simple interest</strong>, you pay interest only on the original amount (principal). With <strong>compound interest</strong>, you also pay interest on previously-added interest—this makes balances grow faster when you don’t keep up with payments.
          </p>

          <Card title="Set Up Your Scenario">
            <div className="grid md:grid-cols-3 gap-4">
              <NumberInput label="Principal" value={principal} setValue={setPrincipal} step={100} suffix="USD" />
              <NumberInput label="Annual Interest Rate" value={ratePct} setValue={setRatePct} step={0.25} suffix="%" />
              <NumberInput label="Years" value={years} setValue={setYears} step={0.5} />
              <Select label="Compounding Frequency (for compound)" value={compFreq} setValue={setCompFreq} options={[{ value: "annual", label: "Annual" },{ value: "monthly", label: "Monthly" },{ value: "daily", label: "Daily (365)" }]} />
              <NumberInput label="Monthly Payment (for simulation)" value={monthlyPay} setValue={setMonthlyPay} step={10} suffix="/mo" />
            </div>
          </Card>

          <div className="grid md:grid-cols-2 gap-6">
            <Card title="Simple Interest (Model)">
              <ul className="space-y-2 text-sm">
                <li>Formula: <code>Interest = Principal × Rate × Time</code></li>
                <li>Principal: <strong>{formatUSD(principal)}</strong></li>
                <li>Rate: <strong>{ratePct}%</strong> per year</li>
                <li>Time: <strong>{years}</strong> years</li>
                <li className="mt-2">Total Interest: <strong>{formatUSD(simpleInterest)}</strong></li>
                <li>Total to Repay: <strong>{formatUSD(simpleTotal)}</strong></li>
              </ul>
            </Card>

            <Card title="Compound Interest (Model)">
              <ul className="space-y-2 text-sm">
                <li>Formula: <code>A = P × (1 + r/n)^(n×t)</code></li>
                <li>Principal: <strong>{formatUSD(principal)}</strong></li>
                <li>Rate: <strong>{ratePct}%</strong> per year</li>
                <li>Compounds per year: <strong>{n}</strong></li>
                <li>Time: <strong>{years}</strong> years</li>
                <li className="mt-2">Total Interest: <strong>{formatUSD(compoundInterest)}</strong></li>
                <li>Total to Repay: <strong>{formatUSD(compoundTotal)}</strong></li>
              </ul>
            </Card>
          </div>

          <Card title="Model the Math – Step by Step (Yearly Compounding Example)">
            <ol className="list-decimal pl-6 space-y-2 text-sm">
              <li>Start: <strong>{formatUSD(principal)}</strong></li>
              <li>End of Year 1: add {ratePct}% → {formatUSD(principal * (1 + r))}</li>
              <li>End of Year 2: add {ratePct}% → {formatUSD(principal * Math.pow(1 + r, 2))}</li>
              <li>End of Year 3: add {ratePct}% → {formatUSD(principal * Math.pow(1 + r, 3))}</li>
            </ol>
            <p className="mt-3 text-gray-600 text-sm">(Use the compounding frequency selector above to explore how changing from annual to monthly or daily alters the total.)</p>
          </Card>

          <div className="grid md:grid-cols-2 gap-6">
            <Card title="What if I only pay this much each month? (Simulation)">
              <p className="text-sm text-gray-600 mb-2">This quick simulation compares balances if your monthly payment is too small.</p>
              <div className="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <div className="font-semibold mb-1">Simple (contrast)</div>
                  <div className="text-gray-600">Estimated balance after {months} months</div>
                  <div className="text-xl font-bold">{formatUSD(simSimpleBalance)}</div>
                </div>
                <div>
                  <div className="font-semibold mb-1">Compound</div>
                  <div className="text-gray-600">Estimated balance after {months} months</div>
                  <div className="text-xl font-bold">{formatUSD(simCompoundBalance)}</div>
                </div>
              </div>
              <div className="mt-3 text-xs text-gray-500">Note: This is an educational illustration, not a precise amortization. It shows how interest-on-interest can keep balances from shrinking when payments are too small.</div>
            </Card>

            <Card title="Quick Checks">
              <ol className="list-decimal pl-6 space-y-3 text-sm">
                <li>Which total is bigger: simple or compound? Why?</li>
                <li>How does increasing compounding frequency (annual → monthly → daily) affect the total?</li>
                <li>For the same loan, what happens if you increase your monthly payment?</li>
              </ol>
            </Card>
          </div>

          <Card title="Reflection (Write 2–3 sentences)">
            <p className="text-sm">Why might compound interest be especially dangerous for student loans or credit cards? What are two smart strategies to keep interest costs down?</p>
          </Card>
        </div>
      );
    }

    function App() { return <StationA />; }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
